# ğŸ¯ Wedding Dashboard - Complete Integration Guide\n\n## Overview\n\nThis guide walks you through integrating the complete Wedding Dashboard system into your existing wedding invitation website. The dashboard provides bride and groom with a secure admin panel to manage guests and customize their invitation.\n\n---\n\n## âœ… What's Included\n\n### 1. **Authentication System**\n- Secure login page with email/password authentication\n- Session management with local storage persistence\n- Protected routes that require authentication\n- Role-based access control (bride/groom/admin)\n\n### 2. **Guest Management Dashboard**\n- View all registered guests in a modern table/card layout\n- Real-time statistics (total, confirmed, pending, declined)\n- RSVP distribution pie chart\n- Advanced filtering and search\n- Guest detail modal with admin notes\n- CSV export functionality\n- Real-time updates when new guests register\n\n### 3. **Invitation Settings Editor**\n- **General Settings**: Couple names, wedding date/time, venues, addresses\n- **Content Settings**: Invitation message, love manifesto, dress code\n- **Media Settings**: Hero image URL, background theme selector\n- **Social Settings**: Instagram, Facebook, TikTok, Website links\n- Live preview link to public invitation\n- All changes sync instantly to public invitation\n\n### 4. **UI Components**\n- Dashboard layout with sidebar navigation\n- Statistics cards with icons\n- Analytics charts (Recharts pie chart)\n- Responsive tables and mobile cards\n- Beautiful modals and forms\n- Consistent luxury design aesthetic\n\n---\n\n## ğŸ“‹ Files Added to Your Project\n\n### Database & API Layer\n```\nclient/src/\nâ”œâ”€â”€ lib/\nâ”‚   â”œâ”€â”€ dashboardAuth.ts          # Authentication utilities\nâ”‚   â”œâ”€â”€ dashboardApi.ts           # Supabase queries and mutations\nâ”‚   â””â”€â”€ validators.ts             # Zod validation schemas (UPDATED)\nâ”œâ”€â”€ types/\nâ”‚   â””â”€â”€ dashboard.ts              # TypeScript types (NEW)\nâ””â”€â”€ contexts/\n    â””â”€â”€ DashboardAuthContext.tsx  # Auth state management (NEW)\n```\n\n### Components\n```\nclient/src/components/\nâ”œâ”€â”€ auth/\nâ”‚   â””â”€â”€ ProtectedRoute.tsx        # Route protection wrapper\nâ”œâ”€â”€ dashboard/\nâ”‚   â””â”€â”€ DashboardLayout.tsx       # Main dashboard layout\nâ”œâ”€â”€ guests/\nâ”‚   â”œâ”€â”€ GuestStats.tsx            # Statistics cards\nâ”‚   â”œâ”€â”€ GuestAnalytics.tsx        # Pie chart analytics\nâ”‚   â”œâ”€â”€ GuestFilters.tsx          # Search and filter controls\nâ”‚   â”œâ”€â”€ GuestTable.tsx            # Guest list table\nâ”‚   â””â”€â”€ GuestDetailModal.tsx      # Guest detail modal\nâ””â”€â”€ settings/\n    â”œâ”€â”€ SettingsTabs.tsx          # Tabbed interface\n    â”œâ”€â”€ GeneralSettingsForm.tsx   # General settings form\n    â”œâ”€â”€ ContentSettingsForm.tsx   # Content editor\n    â”œâ”€â”€ MediaSettingsForm.tsx     # Media/theme settings\n    â””â”€â”€ SocialSettingsForm.tsx    # Social links form\n```\n\n### Pages\n```\nclient/src/pages/\nâ”œâ”€â”€ Dashboard.tsx                 # Dashboard router\nâ”œâ”€â”€ DashboardLogin.tsx            # Login page\nâ”œâ”€â”€ DashboardGuests.tsx           # Guest management page\nâ”œâ”€â”€ DashboardSettings.tsx         # Settings page\nâ””â”€â”€ DashboardProfile.tsx          # Admin profile page\n```\n\n### Database\n```\nDASHBORD_MIGRATION.sql           # Complete database schema\n```\n\n### Updated Files\n```\nclient/src/\nâ”œâ”€â”€ App.tsx                       # Added dashboard routes\nâ”œâ”€â”€ components/Navbar.tsx         # Added dashboard link\nâ””â”€â”€ lib/validators.ts             # Added dashboard schemas\n```\n\n---\n\n## ğŸš€ Setup Instructions\n\n### Step 1: Database Setup\n\n1. **Open Supabase Dashboard** and go to your project\n2. **Navigate to SQL Editor**\n3. **Copy and paste** the contents of `DASHBOARD_MIGRATION.sql`\n4. **Execute** the SQL to create all tables and policies\n\n**Tables Created:**\n- `admin_users` - Bride/groom credentials\n- `event_settings` - Invitation customization fields\n- `timeline_stories` - Couple's story timeline (optional)\n- Enhanced `rsvps` table with admin fields\n\n### Step 2: Create Admin Users\n\nIn Supabase, manually insert admin users into the `admin_users` table:\n\n```sql\nINSERT INTO admin_users (auth_user_id, email, full_name, role, is_active)\nVALUES (\n  'USER_ID_FROM_AUTH', -- Get from Supabase Auth\n  'bride@example.com',\n  'Bride Name',\n  'bride',\n  true\n);\n\nINSERT INTO admin_users (auth_user_id, email, full_name, role, is_active)\nVALUES (\n  'USER_ID_FROM_AUTH', -- Get from Supabase Auth\n  'groom@example.com',\n  'Groom Name',\n  'groom',\n  true\n);\n```\n\n**To get USER_ID:**\n1. Go to Supabase Dashboard â†’ Authentication â†’ Users\n2. Create two new users (bride and groom emails)\n3. Copy their IDs from the user list\n4. Use those IDs in the INSERT statements above\n\n### Step 3: Initialize Event Settings\n\nInsert the initial event settings row:\n\n```sql\nINSERT INTO event_settings (\n  groom_name,\n  bride_name,\n  wedding_date,\n  wedding_time,\n  ceremony_location,\n  ceremony_address,\n  reception_location,\n  reception_address,\n  invitation_message,\n  love_manifesto,\n  dress_code,\n  background_theme\n) VALUES (\n  'Groom Name',\n  'Bride Name',\n  '2025-06-15',\n  '15:00',\n  'Church Name',\n  'Address 123',\n  'Venue Name',\n  'Venue Address',\n  'Welcome to our wedding!',\n  'Our love story...',\n  'Black Tie',\n  'terracotta'\n);\n```\n\n### Step 4: Update App Configuration\n\n1. **Verify Supabase Client** is properly configured in `client/src/lib/supabaseClient.ts`\n2. **Check environment variables** in `.env` file:\n   ```\n   VITE_SUPABASE_URL=your_supabase_url\n   VITE_SUPABASE_ANON_KEY=your_anon_key\n   ```\n\n### Step 5: Test the Dashboard\n\n1. **Start your development server**:\n   ```bash\n   npm run dev\n   ```\n\n2. **Navigate to** `http://localhost:5173/dashboard/login`\n\n3. **Login with** bride or groom credentials\n\n4. **Test features**:\n   - View guest list\n   - Check analytics\n   - Filter and search guests\n   - Export CSV\n   - Edit settings\n   - View profile\n\n---\n\n## ğŸ” Security Features\n\n### Row Level Security (RLS)\n\nAll tables have RLS policies enabled:\n\n- **admin_users**: Only authenticated users can view their own record\n- **event_settings**: Only authenticated admins can read/update\n- **rsvps**: Public can insert, admins can read/update/delete\n- **timeline_stories**: Only authenticated admins can manage\n\n### Authentication Flow\n\n1. User logs in with email/password\n2. Supabase Auth validates credentials\n3. User record checked in `admin_users` table\n4. Session stored in localStorage\n5. Protected routes verify authentication\n6. RLS policies enforce data access\n\n### Best Practices Implemented\n\nâœ… Never expose private keys in frontend\nâœ… Use Supabase Auth for secure authentication\nâœ… RLS policies enforce access control\nâœ… Session validation on route protection\nâœ… Error handling without exposing sensitive info\nâœ… HTTPS-only in production\n\n---\n\n## ğŸ¨ Customization\n\n### Change Colors\n\nEdit `client/src/index.css` to modify the color palette:\n\n```css\n:root {\n  --color-terracotta: #D45309;  /* Primary accent */\n  --color-emerald: #0F766E;     /* Success/secondary */\n  --color-burgundy: #7C1D2F;    /* Error/warning */\n  --color-sand: #D6BFA8;        /* Neutral/border */\n  --color-off-white: #FAF7F5;   /* Background */\n  --color-soft-black: #1a1a1a;  /* Text */\n}\n```\n\n### Customize Dashboard Layout\n\nEdit `client/src/components/dashboard/DashboardLayout.tsx`:\n- Change sidebar width\n- Modify navigation items\n- Update header styling\n- Adjust color scheme\n\n### Add More Settings Tabs\n\nIn `client/src/pages/DashboardSettings.tsx`:\n\n1. Add new tab to `settingsTabs` array\n2. Create new form component\n3. Add tab content switch case\n4. Create validation schema in `validators.ts`\n\n### Modify Guest Table Columns\n\nEdit `client/src/components/guests/GuestTable.tsx`:\n- Add/remove columns\n- Change sorting\n- Customize status badges\n- Modify action buttons\n\n---\n\n## ğŸ“Š Real-Time Features\n\n### Guest Updates\n\nWhen a new guest registers:\n1. Guest data inserted into `rsvps` table\n2. Supabase real-time broadcasts change\n3. Dashboard subscription triggers\n4. Guest list updates automatically\n5. Statistics recalculate\n\n### Settings Sync\n\nWhen admin updates settings:\n1. Form submitted\n2. `event_settings` table updated\n3. Real-time broadcast sent\n4. Public invitation page receives update\n5. Changes visible immediately (no refresh needed)\n\n---\n\n## ğŸ› Troubleshooting\n\n### Login Not Working\n\n**Problem**: \"User is not authorized as admin\"\n\n**Solution**:\n- Verify user exists in `admin_users` table\n- Check `is_active` is `true`\n- Confirm `auth_user_id` matches Supabase Auth user ID\n- Verify RLS policies are enabled\n\n### Guest Data Not Loading\n\n**Problem**: Empty guest list\n\n**Solution**:\n- Check `rsvps` table has data\n- Verify RLS policies allow read access\n- Check browser console for API errors\n- Ensure Supabase connection is working\n\n### Settings Not Saving\n\n**Problem**: \"Error saving settings\"\n\n**Solution**:\n- Verify `event_settings` table has at least one row\n- Check RLS policies allow update\n- Verify authenticated user is admin\n- Check browser console for detailed error\n\n### Real-Time Not Working\n\n**Problem**: Changes not appearing instantly\n\n**Solution**:\n- Verify Supabase real-time is enabled\n- Check browser console for subscription errors\n- Refresh page to verify data is saved\n- Check network tab for WebSocket connection\n\n---\n\n## ğŸ“± Responsive Design\n\nThe dashboard is fully responsive:\n\n- **Desktop**: Full sidebar, table view\n- **Tablet**: Collapsible sidebar, table view\n- **Mobile**: Hamburger menu, card view\n\nBreakpoints:\n- `md`: 768px (tablet)\n- `lg`: 1024px (desktop)\n\n---\n\n## ğŸ”„ Data Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Login Page     â”‚\nâ”‚  (Public)       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚ Email/Password\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Supabase Auth          â”‚\nâ”‚  (Validate Credentials) â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚ User ID\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  admin_users Table       â”‚\nâ”‚  (Check Authorization)   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚ Session Token\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Protected Routes        â”‚\nâ”‚  (Dashboard Pages)       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚ Authenticated\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Supabase Queries        â”‚\nâ”‚  (Fetch Data)            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚ Real-time Subscriptions\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Dashboard UI            â”‚\nâ”‚  (Display & Update)      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ“š API Reference\n\n### Authentication\n\n```typescript\nimport { useDashboardAuth } from '@/contexts/DashboardAuthContext';\n\nconst { user, isAuthenticated, login, logout } = useDashboardAuth();\n```\n\n### Guest Queries\n\n```typescript\nimport { fetchGuests, fetchGuestStats, updateGuest } from '@/lib/dashboardApi';\n\nconst guests = await fetchGuests(filters);\nconst stats = await fetchGuestStats();\nawait updateGuest(guestId, { admin_notes: 'note' });\n```\n\n### Settings Queries\n\n```typescript\nimport { fetchEventSettings, updateEventSettings } from '@/lib/dashboardApi';\n\nconst settings = await fetchEventSettings();\nawait updateEventSettings({ bride_name: 'New Name' });\n```\n\n---\n\n## ğŸ“ Next Steps\n\n1. **Deploy to Production**:\n   - Update environment variables\n   - Enable HTTPS\n   - Configure CORS\n   - Set up backups\n\n2. **Add More Features**:\n   - Guest seating chart\n   - Budget tracker\n   - Timeline/checklist\n   - Photo gallery\n   - Guest messaging\n\n3. **Enhance Security**:\n   - Add 2FA\n   - Implement rate limiting\n   - Add audit logging\n   - Set up monitoring\n\n4. **Improve UX**:\n   - Add dark mode\n   - Create mobile app\n   - Add notifications\n   - Implement undo/redo\n\n---\n\n## ğŸ’¬ Support\n\nFor issues or questions:\n\n1. Check the troubleshooting section\n2. Review Supabase documentation\n3. Check browser console for errors\n4. Verify database schema matches migration\n5. Test with sample data\n\n---\n\n## ğŸ“„ License\n\nThis dashboard system is part of your wedding invitation project.\n\n---\n\n**Happy wedding planning! ğŸ’**\n
